// 1. 基本配置
const PROJECT_ID = 'ca00mh7m'; // 您的專案 ID
const DATASET = 'production';   // 您的數據集
const QUERY = encodeURIComponent('*[_type == "surgicalVideo"]{title, youtubeId, price}');

// 2. 自動抓取後台資料並更新網頁
async function updateWebsiteContent() {
    const url = `https://${PROJECT_ID}.api.sanity.io/v2021-10-21/data/query/${DATASET}?query=${QUERY}`;
    
    try {
        const response = await fetch(url);
        const result = await response.json();
        
        if (result.result && result.result.length > 0) {
            const videoData = result.result[0];
            // 自動更新首頁卡片的標題與 YouTube 連結
            document.querySelector('.video-title').innerText = videoData.title;
            document.querySelector('.video-link').href = `https://www.youtube.com/watch?v=${videoData.youtubeId}`;
            document.querySelector('.video-price').innerText = `$${videoData.price}`;
        }
    } catch (error) {
        console.error('數據對接失敗:', error);
    }
}

updateWebsiteContent();
